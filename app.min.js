const ln=2,getIsBright=e=>{let l={r:.9,g:.8,b:.4},t=[];for(var r=0;r<3;r++)t.push(parseInt(e.slice(2*r+1,2*(r+1)+1),16));let o=Math.max(t[0]*l.r,t[1]*l.g,t[2]*l.b)/255;return o>.5},form=document.querySelector("#form");form.addEventListener("submit",async e=>{e.preventDefault();let l=+document.querySelector("#width").value,t=+document.querySelector("#height").value,r=document.querySelector("#color").value,o=document.querySelector("#type").value,n=document.createElement("canvas");n.width=l,n.height=t;let i=n&&n.getContext("2d");if(!n||!i)return;i.clearRect(0,0,l,t),i.fillStyle=r,i.fillRect(0,0,l,t);let a=`Dummy - ${o}`,c=`${String(l)}x${String(t)}`,s=`${a} / ${c}`,f=Math.min(Math.floor(+l/10),Math.floor((+t-4)/2),32),u=Math.min(Math.floor((+l-10)/s.length),Math.floor(+t-4)),$=getIsBright(r),d=$?"#000000":"#FFFFFF";if(f>=u){let g=Math.floor((+l-(f*a.length+f)/2)/2),m=Math.floor((+t-(2*f+4))/2+f-2),h=m+f+4;i.font=`${f}px Consolas`,i.fillStyle=d,i.fillText(a,g,m),i.fillText(c,g,h)}else{let y=u>32?32:u;i.font=`${y}px Consolas`,i.fillStyle=d;let S=Math.floor(+l-y*s.length/2)/2,v=Math.floor((+t-y)/2+y-4);i.fillText(s,S,v)}let q="image/";"jpg"===o?q+="jpeg":q+=o;let x=n.toDataURL(q),p=document.querySelector("#result");p.innerHTML=`<h3>Result (click to download):</h3>
  <a href="${x}" download="dummy_${c}.${o}" class="dlLink">
  <img id="dlImage" src="${x}" alt="dummy_${c}.${o}" class="${!$&&"withBorder"}" />
  </a>`});const reset=document.querySelector(".btnCancel");reset.addEventListener("click",()=>{let e=document.querySelector("#result");e.innerHTML=""});
