const ln=2,getIsBright=e=>{let l={r:.9,g:.8,b:.4},t=[];for(var r=0;r<3;r++)t.push(parseInt(e.slice(2*r+1,2*(r+1)+1),16));let o=Math.max(t[0]*l.r,t[1]*l.g,t[2]*l.b)/255;return o>.5},form=document.querySelector("#form");form.addEventListener("submit",async e=>{e.preventDefault();let l=+document.querySelector("#width").value,t=+document.querySelector("#height").value,r=document.querySelector("#color").value,o=document.querySelector("#type").value,i=document.createElement("canvas");i.width=l,i.height=t;let n=i&&i.getContext("2d");if(!i||!n)return;n.clearRect(0,0,l,t),n.fillStyle=r,n.fillRect(0,0,l,t);let a=`Dummy - ${o}`,s=`${String(l)}x${String(t)}`,c=`${a} / ${s}`,f=Math.min(Math.floor(+l/10),Math.floor((+t-4)/2),32),u=Math.min(Math.floor((+l-10)/c.length),Math.floor(+t-4)),d=getIsBright(r),g=d?"#000000":"#FFFFFF";if(f>=u){let m=Math.floor((+l-(f*a.length+f)/2)/2),$=Math.floor((+t-(2*f+4))/2+f-2),h=$+f+4;n.font=`${f}px Consolas`,n.fillStyle=g,n.fillText(a,m,$),n.fillText(s,m,h)}else{let y=u>32?32:u;n.font=`${y}px Consolas`,n.fillStyle=g;let v=Math.floor(+l-y*c.length/2)/2,S=Math.floor((+t-y)/2+y-4);n.fillText(c,v,S)}let q="image/";"jpg"===o?q+="jpeg":q+=o;let x=i.toDataURL(q),p=document.querySelector("#result");p.innerHTML=`<h3>Result (click to download):</h3>
  <div class="imgContainer">
  <a href="${x}" download="dummy_${s}.${o}" class="dlLink">
  <img id="dlImage" src="${x}" alt="dummy_${s}.${o}" class="${!d&&"withBorder"}" />
  </a></div>`});const reset=document.querySelector(".btnCancel");reset.addEventListener("click",()=>{let e=document.querySelector("#result");e.innerHTML=""});
